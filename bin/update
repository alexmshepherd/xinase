#!/bin/bash

echo "Updating your Owdex installation."
echo "Note: this is for use in a production environment, and will not work in dev."

# get script location and cd to owdex main dir
parent_path=$( cd "$(dirname "${BASH_SOURCE[0]}")" ; pwd -P )
cd "$parent_path/.."

echo "Stopping Docker containers..."
docker compose --profile prod down

echo "Getting latest code..."
git pull

echo "Restarting Owdex..."
docker compose --profile prod up --build -d

echo "Updated. Happy searching!"
exit
