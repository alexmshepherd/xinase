{% extends "_base.html" %}
{% block title %}
    results for "{{ query }}"
{% endblock title %}
{% block main %}
    <p>
        Searching for <code>{{ query }}</code> on <code>{{ indices }}</code> from
        <code>{{ core }}</code> by <code>{{ sort }}</code> and got
        <code>{{ results|length }}</code> results
    </p>
    <ul>
        {% for result in results %}
            <li>
                <div>
                    <a href="{{ result.url }}">
                        <span>
                            {{ result.url }}
                        </span>
                        <h4>
                            {{ result.title }}
                        </h4>
                    </a>
                </div>
                <p>
                    {{ result.description }}
                </p>
                <div>
                    <span>
                        {{ result.submitter }}
                        on {{ result.index }}
                    </span>
                    <ul>
                        <li>info</li>
                        {% if "user" in session %}
                            <li
                                hx-post="{{ url_for('vote.vote') }}"
                                hx-vals='{"id": "{{ result.id }}", "core": "{{ core }}"}'
                                hx-confirm="Vote in favour of this link?"
                            >
                                vote
                            </li>
                            <li>flag</li>
                            <li>save</li>
                        {% endif %}
                    </ul>
                </div>
            </li>
        {% endfor %}
    </ul>
{% endblock main %}
